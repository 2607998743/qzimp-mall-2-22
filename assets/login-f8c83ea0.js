import{_ as g,r as h,u as w,o as v,c as I,a as n,b as a,w as r,d as u,e as b,E as p,p as y,f as V}from"./index-692e4f4b.js";import{a as E,b as S}from"./ums-admin-c5a4d8f3.js";import{E as k,a as x,b as D,c as F}from"./index-1e243f61.js";const B={setup(){const e=h({username:"414090297",password:"12345678"}),t=w();return{formData:e,resetForm:()=>{e.value={username:"",password:""}},login:async()=>{if(!e.value.username||!e.value.password){p.error("账号和密码不能为空");return}try{const s=await E(e.value);localStorage.setItem("token",s.token),localStorage.setItem("adminId",s.data.admin.id);const l=await S(s.data.admin);l.data&&l.data.help&&localStorage.setItem("roleId",l.data.help.roleId),t.push("/ums-admin")}catch(s){console.error(s),p({message:"登录失败!请检查账号密码是否有误",type:"error"})}}}}},C=e=>(y("data-v-51a77f5e"),e=e(),V(),e),N={class:"login-container"},M={class:"login-box"},R=C(()=>n("div",{class:"login-header"},[n("h2",null,"用户登录")],-1)),U={class:"login-header"};function L(e,t,_,o,s,l){const i=k,d=x,c=D,f=F;return v(),I("div",N,[n("div",M,[R,a(f,{model:o.formData,onSubmit:b(o.login,["prevent"]),class:"login-form","label-width":"55"},{default:r(()=>[a(d,{label:"用户名"},{default:r(()=>[a(i,{modelValue:o.formData.username,"onUpdate:modelValue":t[0]||(t[0]=m=>o.formData.username=m)},null,8,["modelValue"])]),_:1}),a(d,{label:"密码"},{default:r(()=>[a(i,{type:"password",modelValue:o.formData.password,"onUpdate:modelValue":t[1]||(t[1]=m=>o.formData.password=m)},null,8,["modelValue"])]),_:1}),n("div",U,[a(d,null,{default:r(()=>[a(c,{type:"primary","native-type":"submit"},{default:r(()=>[u("登录")]),_:1}),a(c,{type:"primary",onClick:o.resetForm},{default:r(()=>[u("重置")]),_:1},8,["onClick"])]),_:1})])]),_:1},8,["model","onSubmit"])])])}const q=g(B,[["render",L],["__scopeId","data-v-51a77f5e"]]);export{q as default};
